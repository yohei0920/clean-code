## 教材

プログラミング中級者になりたい人のためのクリーンコード入門 | Udemy
https://www.udemy.com/course/clean-code-tutorial/?couponCode=BFCPSALE24JP


## 学んだこと

### コメントはなるべく書かない

- そもそもコメントはコードを実装することにおいて、必要のないもの
- また、コメントがメンテナンスされているとは限らない
- コミットメッセージなどでも代用可能
- 冗長になる可能性

### メリット

- 影響調査を行う工数の削減
- コードを読み物として読めること
- コードが整理できる
- 意識しなくても綺麗にコードが書ける
- コードレビューの基準を得る

### クリーンコードが優先されないケース

- パフォーマンスが優先されるとき
- 速度重視の開発
    - 綺麗に書くより、早くかく

### 命名規則

- 美しいコードは命名規則がしっかりしている
- コードの読み手は関数の中まではみたくない
    - メソッド名で推察できるようにしてほしい
    - レビュアー時も関数の中まで見る必要はないということだ
- 特にメタプロはあまり現場で作る機会はそうないので抽象ではなく具象で書く

### いい変数名

- 長すぎず、短すぎない
- 変数が保持するものを正確に説明する
- 曖昧でない
- 単語は2、3つくらいがわかりやすい

### 真偽値の命名規則
- isを使うことで疑問文を明示することができる
- 肯定文が伝わりやすい
- 過去分詞系を使うとわかりやすい

### 関数の命名規則
- 長くなりそうなときは省略形で表してもいい(むしろ長くなるのを避けれる)
  - minutes -> mins
- getは値を取得するときにprefixにつける
- setは値を設定するときにprefixにつける
- ここでも抽象ではなく具象を意識する

### 変数名
- 意味があり、発音可能な変数名
  - 多くの人に意味が伝わること
  - チームコミュニケーションにも影響する
- 意味が似ていて違う単語が使われている場合、本当に違う単語でいいか、同じ単語で書けないかを考える(できるなら統一する)
  - sumとtotalやremoveとdeleteとか
  - 単語が違うと読み手は違う意味と思って読まなければいけなくなる
- 開発業界などで共通な場合は省略した方がいい場合もある
  - a11y(accessibility)、i18n(internationalization)、customer(cstm)

### コメントはコードで表せないときに書く
- マジックナンバーとかで特別な意味を持つ時とか
- 緊急時にやむなくそうせざるを得なかった時とか
- 後からトレーサビリティが取れなくなって困る時とか

### マジックナンバー・マジックキャラクターを避ける
- マジックナンバーはベタ書きの数字、マジックキャラクターはベタ書きの文字列のこと
- それらは避けて意味のある定数にする

### 関数定義
- 1つの関数で1つの機能を実装し、小さく作る
- DRY原則
- 関数定義の順番も、コードを読み物としたときに読みやすいかを意識できるとよりよくなりそう

### DRYを適用しない方がいいケース
- 目的が違うとき
  - 関数化する前にその関数の目的を考え、DRY対象のコードがその目的に合っているか
- 共通化したときにcaseやifが増える時も、DRY化しないほうがいいサインかもしれない
- 引数が多くなった時も、DRY化しない方がいいか、引数をオブジェクト化できないか考える
  - 目安は2-3個が妥当
- 必要に応じてデフォルト引数も使う
- フラグはできるだけわたさない
  - 本番運用していて、至急止めないといけないとか、一時的に対応する場面以外は他の方法がないか考えた方が良さそう(コメント書くのも難しいイメージ)

### 参照透過性
- 決まった入力に対して、決まった出力を返す
- 関数ないでグローバル変数を参照したりすると、参照透過性はなくなる

### 副作用
- 副作用を持つ関数は限定的にすること(コードが追いづらくなるため)
  - 引数で渡ってきたオブジェクトの値を書き換える、外部スコープ、DOM操作、サーバー通信など
- 引数で渡ってきたオブジェクトの中身は書き換えず、戻り値で結果を返すようにする
  - Rubyでいう破壊的変更を元のオブジェクトでなるべくやらないを言いたいんだと思う
- 副作用のない関数(純粋関数)を切り出すとその関数はテストしやすい(テスト容易性)があるものとなる
  - **関数は純粋関数として切り出せないかを考える(テスト容易性の観点からも)**

### 条件式
- 条件式の伝わりやすさ、読み手の負担の減らし方、if文は何かと最終手段だと心得る
- 条件分岐は複数箇所に散りばめない
  - 難しそうだけど、仕様変更による修正箇所増加などをイメージしてみる
- 頻繁に行われる評価式をなるべく最初に書いて読み手の負担を減らす
- 左辺に定数を置く
  - ヨーダ条件式というらしい
  - 主に意図しない代入を防ぐ目的？かな
  - =と==の区別をするとかだと思うけど、コンパイラ言語ならコンパイル時にエラー出るしな
  - 読みやすさ的にはどうなんだろう
- 早期returnはネストを防ぐことが可能
- ifを書くと、将来条件が増えて複雑になる可能性がある
  - コールバック関数などでifの複雑性を減らせないかを考える

### クラス
- クラス内部情報は可能な限り隠蔽するのが吉
- 使用側がクラス内部について知らなくても使えるクラスが良い
- 継承(is-a)とコンポジション(has-a)のイメージ

### solid
- 単一責任の原則
- オープン・クローズドの原則
  - クラスの拡張はオープンで、修正はクローズド
  - 密結合だとこの原則に反しやすそう
- リスコフの置換原則
- インターフェイス分離の原則
- 依存関係逆転の原則
  - 抽象クラスを具象クラスに合わせるのではなく、その逆の関係にする